!function(e){e.jqplot.EnhancedLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)},e.jqplot.EnhancedLegendRenderer.prototype=new e.jqplot.TableLegendRenderer,e.jqplot.EnhancedLegendRenderer.prototype.constructor=e.jqplot.EnhancedLegendRenderer,e.jqplot.EnhancedLegendRenderer.prototype.init=function(s){this.numberRows=null,this.numberColumns=null,this.seriesToggle="normal",this.seriesToggleReplot=!1,this.disableIEFading=!0,e.extend(!0,this,s),this.seriesToggle&&e.jqplot.postDrawHooks.push(t)},e.jqplot.EnhancedLegendRenderer.prototype.draw=function(t,n){if(this.show){var l,o=this._series,i="position:absolute;";i+=this.background?"background:"+this.background+";":"",i+=this.border?"border:"+this.border+";":"",i+=this.fontSize?"font-size:"+this.fontSize+";":"",i+=this.fontFamily?"font-family:"+this.fontFamily+";":"",i+=this.textColor?"color:"+this.textColor+";":"",i+=null!=this.marginTop?"margin-top:"+this.marginTop+";":"",i+=null!=this.marginBottom?"margin-bottom:"+this.marginBottom+";":"",i+=null!=this.marginLeft?"margin-left:"+this.marginLeft+";":"",i+=null!=this.marginRight?"margin-right:"+this.marginRight+";":"",this._elem=e('<table class="jqplot-table-legend" style="'+i+'"></table>'),this.seriesToggle&&this._elem.css("z-index","3");var d,a,r,h,g,p,c,m,b,u,w,f=!1;this.numberRows?(d=this.numberRows,a=this.numberColumns?this.numberColumns:Math.ceil(o.length/d)):this.numberColumns?(a=this.numberColumns,d=Math.ceil(o.length/this.numberColumns)):(d=o.length,a=1);var q=0;for(r=o.length-1;r>=0;r--)(1==a&&o[r]._stack||o[r].renderer.constructor==e.jqplot.BezierCurveRenderer)&&(f=!0);for(r=0;r<d;r++){for((g=e(document.createElement("tr"))).addClass("jqplot-table-legend"),f?g.prependTo(this._elem):g.appendTo(this._elem),h=0;h<a;h++){if(q<o.length&&(o[q].show||o[q].showLabel)&&(l=o[q],m=this.labels[q]||l.label.toString())){var j,v=l.color;if(b=(f?r!=d-1:r>0)?this.rowSpacing:"0",(p=e(document.createElement("td"))).addClass("jqplot-table-legend jqplot-table-legend-swatch"),p.css({textAlign:"center",paddingTop:b}),(u=e(document.createElement("div"))).addClass("jqplot-table-legend-swatch-outline"),(w=e(document.createElement("div"))).addClass("jqplot-table-legend-swatch"),w.css({backgroundColor:v,borderColor:v}),p.append(u.append(w)),(c=e(document.createElement("td"))).addClass("jqplot-table-legend jqplot-table-legend-label"),c.css("paddingTop",b),this.escapeHtml?c.text(m):c.html(m),f?(this.showLabels&&c.prependTo(g),this.showSwatches&&p.prependTo(g)):(this.showSwatches&&p.appendTo(g),this.showLabels&&c.appendTo(g)),this.seriesToggle)"string"!=typeof this.seriesToggle&&"number"!=typeof this.seriesToggle||e.jqplot.use_excanvas&&this.disableIEFading||(j=this.seriesToggle),this.showSwatches&&(p.bind("click",{series:l,speed:j,plot:n,replot:this.seriesToggleReplot},s),p.addClass("jqplot-seriesToggle")),this.showLabels&&(c.bind("click",{series:l,speed:j,plot:n,replot:this.seriesToggleReplot},s),c.addClass("jqplot-seriesToggle")),!l.show&&l.showLabel&&(p.addClass("jqplot-series-hidden"),c.addClass("jqplot-series-hidden"));!0}q++}p=c=u=w=null}}return this._elem};var s=function(s){var t=s.data,n=t.series,l=t.replot,o=t.plot,i=t.speed,d=n.index,a=!1;!n.canvas._elem.is(":hidden")&&n.show||(a=!0);n.toggleDisplay(s,function(){if(l){var s={};e.isPlainObject(l)&&e.extend(!0,s,l),o.replot(s),a&&i&&((t=o.series[d]).shadowCanvas._elem&&t.shadowCanvas._elem.hide().fadeIn(i),t.canvas._elem.hide().fadeIn(i),t.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+t.index).hide().fadeIn(i))}else{var t;(t=o.series[d]).canvas._elem.is(":hidden")||!t.show?(void 0!==o.options.legend.showSwatches&&!0!==o.options.legend.showSwatches||o.legend._elem.find("td").eq(2*d).addClass("jqplot-series-hidden"),void 0!==o.options.legend.showLabels&&!0!==o.options.legend.showLabels||o.legend._elem.find("td").eq(2*d+1).addClass("jqplot-series-hidden")):(void 0!==o.options.legend.showSwatches&&!0!==o.options.legend.showSwatches||o.legend._elem.find("td").eq(2*d).removeClass("jqplot-series-hidden"),void 0!==o.options.legend.showLabels&&!0!==o.options.legend.showLabels||o.legend._elem.find("td").eq(2*d+1).removeClass("jqplot-series-hidden"))}})},t=function(){if(this.legend.renderer.constructor==e.jqplot.EnhancedLegendRenderer&&this.legend.seriesToggle){var s=this.legend._elem.detach();this.eventCanvas._elem.after(s)}}}(jQuery);